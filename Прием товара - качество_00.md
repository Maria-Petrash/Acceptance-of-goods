# **Процесс приёмки непродовольственных товаров с выборочной проверкой качества**

**Схема BPMN:** https://modeler.camunda.io/share/522d9ee1-3ac5-4d65-86b2-cfedada0a08e

Для каждого шага процесса указаны:

- участники и роли;
- входы (товары, документы, данные);
- используемые ИС и документы;
- порядок действий и коммуникаций.

Цель: добавить контроль качества **без замедления приёмки** за счёт параллельного потока и статистической выборки.

------

# 0. Предпроцесс: формирование ожидания склада и плана размещения (Pre-Inbound)

> Этап обязателен логически и выполняется **до прибытия товара**.

## Цель этапа

Подготовить склад к приёму конкретной поставки: по времени, объёму и размещению.

### Участники

- Поставщик / система поставщика
- ERP / OMS маркетплейса
- WMS
- Планировщик склада (роль)

### Вход

- Договор / заказ на поставку
- Номенклатура и количества
- Требования к типу хранения

### Порядок действий и коммуникации

1. **Поставщик → ERP / OMS**
   - Передаёт информацию о планируемой поставке.
2. **ERP / OMS → WMS**
   - Создаёт документ **«Ожидаемая поставка» (ASN / Expected Inbound)**.
3. **WMS**
   - Резервирует:
     - тайм-слот приёмки,
     - ворота,
     - ресурсы.
   - Выполняет **предварительное планирование размещения (pre-putaway)**:
     - определяет зоны хранения,
     - подбирает ячейки под ожидаемый объём и тип товара.
4. **WMS → Склад**
   - Делает поставку «ожидаемой и готовой к приёмке».

### Выход

- Активный ASN в WMS.
- Зарезервированный тайм-слот.
- Предварительный план размещения товара.

------

# 0.05 Предварительная валидация ASN (без замедления приёмки)

## Цель

Отсечь ошибки в документах до прибытия товара.

### Участники

- Поставщик
- ERP / OMS
- WMS

### Правила

- Проверка форматов, единиц измерения, норм упаковки (case-pack).
- Автоматическое отклонение ASN с критичными ошибками.
- Запрет приёмки без ASN/тайм-слота.

### Выход

- Только валидные ASN допускаются к приёмке.

------

# 0.1 Политика статистического контроля качества (настройка в WMS)

## Цель этапа

Задать правила выборки так, чтобы QC шёл параллельно приёмке и не блокировал поток.

### Участники

- Служба качества (ОТК)
- Аналитик / владелец процесса
- WMS

### Вход

- История брака по поставщикам (N последних поставок или 90 дней)
- Классификация риска SKU
- Уровни приемлемого качества (AQL) по категориям

### 0.1.1 Классификация риска SKU (пример)

Оценка по 5 факторам, 0–2 балла каждый:

- Хрупкость/повреждаемость
- Высокая стоимость / риск претензий
- Техническая сложность / наличие функционала
- История возвратов / рекламаций по SKU
- Риск несоответствия маркировки/комплектации

Сумма баллов → класс риска:

- 0–2: **Low**
- 3–5: **Medium**
- 6–10: **High**

### 0.1.2 Классификация поставщиков (пример)

Считается по rolling-периоду (N последних поставок или 90 дней):

- `defect_rate = бракованные_единицы / проверенные_единицы`
- `claim_rate = рекламации_по_поставщику / поставленные_единицы`

Классы:

- **A**: defect_rate < 0.5% и claim_rate < 0.3%
- **B**: defect_rate 0.5–2.0% или claim_rate 0.3–1.0%
- **C**: defect_rate > 2.0% или claim_rate > 1.0%

Новый поставщик → класс C на первые M поставок (например, 3).

### 0.1.3 Расчёт выборки (формализовано)

1) **Базовая выборка по размеру партии (lot_qty)**:

- 1–10: 100% (но не менее 2)
- 11–50: 5
- 51–200: 8
- 201–500: 13
- 501–1200: 20
- 1201–3200: 32
- >3200: 50

2) **Коэффициенты**:

- По риску SKU: Low 1.0 / Medium 1.5 / High 2.0
- По поставщику: A 0.7 / B 1.0 / C 1.5

3) **Итоговая выборка**:

`sample_qty = round(base_sample * sku_coef * supplier_coef)`

4) **Ограничения**:

- `min_sample = 2`
- `max_sample = 40`
- `max_rate = 15%` от партии

### 0.1.4 Усиление контроля (триггеры)

- 2 подряд партии с браком выше порога → x2 выборка на 2 следующих поставки.
- SKU с рекламациями > X% → принудительный High на 30 дней.
- Сезонные пики возвратов → временный коэффициент 1.2.

### Выход

- Матрица выборки и коэффициенты, заданные в WMS.
- Автоматическое назначение QC-заданий по ASN и SKU.

------

# 0.2 Модель статусов WMS и карантин

## Цель

Формализовать статусы и решения по качеству, чтобы исключить ручные блокировки.

### Статусы по линии ASN (line-level)

- `QC Pending` — ожидает выборки/проверки
- `QC In Progress` — проверка выполняется
- `QC Passed` — выпуск в размещение
- `QC Failed` — блокировка и перевод в карантин
- `QC Released with Deviation` — выпуск с отклонениями по согласованию

### Статусы по партии/поставке (ASN-level)

- `Receiving Started`
- `QC In Progress`
- `QC Completed`
- `Closed`

### Карантин и разбор

1. **WMS** переводит партию/линии в `QC Failed`.
2. **Перемещение** в зону *Quarantine* (отдельные ячейки).
3. **Создание NCR** (несоответствие) с фото и типом дефекта.
4. **Решение** (служба качества + закупки):
   - возврат поставщику,
   - ремонт/перекомплектация,
   - уценка,
   - списание.
5. **WMS** обновляет статус и инициирует соответствующие операции.

------

# 1. Подача ТС и выгрузка товара

## Цель

Физически принять товар в рамках заранее ожидаемой поставки.

### Участники

- Водитель ТС
- Кладовщик приёмки
- Инспектор качества (служба качества / ОТК)
- Погрузочная техника

### Вход

- **Ожидаемая поставка (ASN)**
- Тайм-слот и ворота
- Товары
- Транспортная накладная (ТН / CMR)

### Порядок действий и коммуникации

1. **Водитель → Кладовщик**
   - Сообщает о прибытии в рамках тайм-слота.
   - Передаёт ТН.
2. **Кладовщик**
   - Проверяет наличие ASN в WMS.
   - Подтверждает разрешение на выгрузку.
3. **Кладовщик + техника**
   - Выгружают товар.
4. **Кладовщик**
   - Размещает товар в зоне *Inbound / Receiving*.

### Передача

- Товар: от перевозчика → складу.
- ТН: используется как сопроводительный документ (без сверки).

### Выход

- Товар физически на складе, в зоне приёмки.

------

# 1.1 Неплановая поставка (исключительный сценарий)

## Цель

Принять товар без ASN без потери управляемости.

### Порядок действий

1. **Кладовщик → Оператор WMS**
   - Фиксирует факт прибытия без ASN.
2. **Оператор WMS**
   - Создаёт временный ASN в WMS.
3. **WMS**
   - Назначает флаг *Unplanned* и обязательный разбор расхождений.

### Выход

- Поставка заведена, но с повышенным контролем.

------

# 2. Идентификация поставки

## Цель

Связать выгруженный товар с конкретным ASN в системе.

### Участники

- Кладовщик
- Оператор WMS
- WMS

### Вход

- Товар в зоне Inbound
- ASN

### Порядок действий и коммуникации

1. **Кладовщик → Оператор WMS**
   - Передаёт идентификатор поставки.
2. **Оператор WMS → WMS**
   - Активирует приёмку по ASN.
3. **WMS**
   - Переводит ASN в статус *«Receiving Started»*.
4. **Оператор WMS → Кладовщик**
   - Подтверждает корректную идентификацию.

### Выход

- Товар логически привязан к ожидаемой поставке.

------

# 3. Статистический контроль качества (выборочный, параллельный)

## Цель

Проверить качество части товара без остановки основного потока.

### Участники

- Инспектор качества (служба качества / ОТК)
- Кладовщик
- WMS

### Вход

- Товар в зоне Inbound
- План выборки из WMS
- Рейтинг поставщика и категория риска SKU

### Порядок действий и коммуникации

1. **WMS**
   - Определяет SKU/партии для контроля и размер выборки.
2. **Кладовщик**
   - Отбирает выборку **во время разгрузки** и передаёт в зону QC.
   - Остальной товар идёт по основному потоку.
3. **Инспектор качества**
   - Проверяет упаковку, маркировку, видимые дефекты.
   - Для High-risk SKU выполняет базовую функциональную проверку.
4. **Инспектор качества → WMS**
   - Фиксирует результат.
5. **WMS**
   - При статусе *QC Passed* разрешает размещение.
   - При *QC Failed* переводит в *Quarantine* и инициирует разбор.

### Выход

- Результат QC для партии/линии поставки.
- Решение: выпуск в размещение или карантин.

------

# 4. Количественная приёмка

## Цель

Подтвердить фактическое количество товара.

### Участники

- Кладовщик
- Оператор WMS
- WMS

### Вход

- Товар в зоне приёмки
- Ожидаемые количества из ASN

### Порядок действий и коммуникации

1. **WMS → Оператор**
   - Выдаёт задания на подсчёт.
2. **Оператор → Кладовщик**
   - Указывает метод подсчёта.
3. **Кладовщик**
   - Выполняет физический подсчёт:
     - по LPN/SSCC (паллет/короб),
     - или поштучно для непакетируемых SKU.
4. **Кладовщик → Оператор**
   - Передаёт фактические данные.
5. **Оператор → WMS**
   - Фиксирует количество.
6. **WMS**
   - Сравнивает ожидание и факт.
   - Фиксирует расхождения (если есть).

### Принципы

- **Blind receiving**: кладовщик не видит ожидаемых количеств.
- **Допуски**: если расхождение в пределах порога (например, ±1 шт или ±0.5%),
  допускается авто-принятие без разбора.
- **Весовой контроль** (опционально): сверка веса короба/паллеты с эталоном.

### Выход

- Количество подтверждено в системе.
- При расхождении выше допуска инициируется **разбор расхождений** (см. шаг 5).

------

# 5. Разбор расхождений по количеству (исключительный сценарий)

## Цель

Обработать недостачи, излишки и несоответствия SKU без искажения складских остатков.

### Участники

- Кладовщик
- Оператор WMS
- WMS
- Логистика / закупки
- Финансы (претензии)

### Вход

- Расхождения по количеству из WMS
- ТН / CMR (сопроводительный документ)

### Порядок действий и коммуникации

1. **Кладовщик**
   - Выполняет повторный пересчёт/проверку упаковочных единиц.
   - Делает фотофиксацию паллет/коробов и маркировки.
2. **Оператор WMS → WMS**
   - Регистрирует **акт расхождений** и статус *«Принята с расхождениями»*.
3. **WMS**
   - Делит товар на:
     - подтверждённый к размещению;
     - спорный/излишний — в зону *Hold / Discrepancy*.
4. **Логистика / закупки**
   - Уведомляет поставщика и инициирует претензию.
5. **Финансы**
   - Формируют корректировку (дебет-/кредит-нота) по факту.

### Типовые решения

- **Недостача**: принимается фактическое количество, создаётся претензия.
- **Излишек**: товар удерживается в *Hold* до согласования; затем возврат или доп.заказ.
- **Неверный SKU**: блокируется как *Wrong SKU* и отправляется на разбор/возврат.

### SLA

- Разбор и решение по спорным позициям: 24–48 часов.
- По превышению SLA: блокировка приёмки следующих поставок поставщика.

### Выход

- Подтверждённые остатки корректны.
- Спорные позиции отделены и оформлены для дальнейшего решения.

------

# 6. Завершение приёмки поставки

## Цель

Формально принять ответственность за количество с учётом результатов QC.

### Участники

- Оператор WMS
- WMS

### Вход

- Результаты количественной приёмки
- Статусы QC по линиям
- Результаты разбора расхождений (если были)

### Порядок действий

1. **Оператор → WMS**
   - Подтверждает завершение приёмки.
2. **WMS**
   - Присваивает статус:
     - *«Принята»* / *«Принята с расхождениями»*,
   - Для линий в `QC Failed` — блокирует размещение.

### Выход

- Поставка закрыта.
- Товар доступен для размещения, кроме заблокированных линий.

------

# 7. Перемещение в staging с учётом плана размещения

## Цель

Подготовить товар к размещению в заранее определённые зоны.

### Участники

- Кладовщик
- Погрузочная техника
- WMS

### Вход

- Принятый товар
- **План размещения (pre-putaway)**

### Порядок действий

1. **WMS → Кладовщик**
   - Формирует задания на перемещение в staging,
   - учитывая будущие ячейки хранения.
2. **Кладовщик**
   - Перемещает товар в staging.
3. **Кладовщик → WMS**
   - Подтверждает выполнение.

### Выход

- Товар в staging, сгруппирован под дальнейшее размещение.

------

# 8. Размещение на хранение (Putaway)

## Цель

Разместить товар в **заранее спланированные ячейки хранения**.

### Участники

- WMS
- Кладовщик
- Погрузочная техника

### Вход

- Товар в staging
- План размещения

### Порядок действий

1. **WMS**
   - Активирует putaway-задания по ранее рассчитанным ячейкам.
2. **WMS → Кладовщик**
   - Передаёт задания.
3. **Кладовщик**
   - Размещает товар в указанные ячейки.
4. **Кладовщик → WMS**
   - Подтверждает размещение.

### Дополнительная проверка при размещении (опционально)

- Для High-risk SKU или после спорного результата QC
  выполняется короткая проверка целостности упаковки и маркировки
  непосредственно в зоне размещения.

### Выход

- Товар размещён.
- Статус: *«На хранении»*

------

# 9. Упрощённая проверка качества при формировании заказа (Outbound)

## Цель

Выполнить минимальную проверку без замедления сборки заказа.

### Участники

- Сборщик
- WMS

### Вход

- Товар на хранении
- Задание на отбор

### Порядок действий

1. **Сборщик**
   - Быстро проверяет целостность упаковки, маркировку и видимые дефекты.
2. **Сборщик → WMS**
   - При выявлении дефекта создаёт отметку о браке и переводит товар в разбор.

### Выход

- Заказ собран без задержек, дефекты фиксируются по факту.

------

# 10. Метрики процесса (KPI)

## Цель

Контроль скорости и качества приёмки.

### Метрики

- Dock-to-Stock (время от прибытия до размещения).
- % расхождений по количеству.
- Время разбора расхождений.
- % партий с QC и средняя выборка.
- % брака по поставщикам и SKU.
